import sympy

def solve_homotopy_rank():
    """
    Calculates the rank of the third homotopy group pi_3(X) for a smooth
    quintic hypersurface X in CP^3.
    """
    d = 5  # Degree of the hypersurface
    n = 3  # Dimension of the ambient complex projective space CP^n

    print("Step 1: The Long Exact Sequence (LES) of Homotopy Groups")
    print("Let X be a smooth quintic hypersurface in Y = CP^3.")
    print("The LES for the pair (Y, X) contains the segment:")
    print("... -> pi_4(Y, X) -> pi_3(X) -> pi_3(Y) -> ...\n")

    print("Step 2: Determine the group pi_3(CP^3)")
    print(f"We can find the homotopy groups of CP^n using the Hopf fibration:")
    print(f"S^1 -> S^(2n+1) -> CP^n")
    print(f"For n = {n}, we have S^1 -> S^7 -> CP^3.")
    print("The LES of homotopy groups for this fibration gives:")
    print("... -> pi_k(S^1) -> pi_k(S^7) -> pi_k(CP^3) -> pi_{k-1}(S^1) -> ...")
    print("For k=3, pi_3(S^1) = 0 and pi_2(S^1) = 0. So the sequence becomes:")
    print("0 -> pi_3(S^7) -> pi_3(CP^3) -> 0")
    print("This means pi_3(CP^3) is isomorphic to pi_3(S^7).")
    print("Since S^7 is 6-connected, its homotopy groups pi_k(S^7) are 0 for k <= 6.")
    pi_3_CP3 = 0
    print(f"Therefore, pi_3(S^7) = {pi_3_CP3}, and so pi_3(CP^3) = {pi_3_CP3}.\n")

    print("Step 3: Simplify the LES for the pair (CP^3, X)")
    print("Substituting pi_3(CP^3) = 0 into the LES from Step 1 gives:")
    print("... -> pi_4(CP^3, X) -> pi_3(X) -> 0")
    print("This implies that pi_3(X) is a quotient of pi_4(CP^3, X).")
    print("Consequently, rank(pi_3(X)) <= rank(pi_4(CP^3, X)).\n")

    print("Step 4: Relate rank of homotopy to homology")
    print("The Rational Hurewicz Theorem states that for a pair of simply connected spaces (Y, X),")
    print("pi_k(Y, X) tensor Q is isomorphic to H_k(Y, X; Q).")
    print("This means rank(pi_k(Y, X)) = dim(H_k(Y, X; Q)).")
    print(f"We need the rank of pi_4(CP^3, X), which equals the dimension of H_4(CP^3, X; Q).\n")

    print("Step 5: Compute the dimension of H_4(CP^3, X; Q)")
    print("We use the LES of rational homology for the pair (CP^3, X):")
    print("... -> H_4(X; Q) -> H_4(CP^3; Q) -> H_4(CP^3, X; Q) -> H_3(X; Q) -> ...")
    
    print("\n  Sub-step 5a: Determine Betti numbers of X to find dimensions of homology groups.")
    chi_X = d**3 - 4*d**2 + 6*d
    print(f"  The Euler characteristic chi(X) for a degree d={d} surface in CP^3 is d^3-4d^2+6d = {chi_X}.")
    b0 = 1
    # By the Lefschetz hyperplane theorem, H_1(X) is isomorphic to H_1(CP^3) = 0.
    b1 = 0 
    # By Poincare duality for the 4-manifold X, b_3(X) = b_1(X).
    b3 = b1
    # We have chi(X) = b0 - b1 + b2 - b3 + b4.
    b4 = 1 # X is compact and oriented.
    b2 = chi_X - b0 + b1 + b3 - b4
    print(f"  The Betti numbers of X are (b0, b1, b2, b3, b4) = ({b0}, {b1}, {b2}, {b3}, {b4}).")
    dim_H3_X = b3
    print(f"  So, dim(H_3(X; Q)) = b3 = {dim_H3_X}.")
    dim_H4_X = b4
    dim_H4_CP3 = 1 # H_4(CP^3) is generated by a plane CP^2.
    print(f"  Also, dim(H_4(X; Q)) = {dim_H4_X} and dim(H_4(CP^3; Q)) = {dim_H4_CP3}.")
    
    print("\n  Sub-step 5b: Analyze the map H_4(X; Q) -> H_4(CP^3; Q).")
    print(f"  The inclusion map X -> CP^3 induces a map on H_4 that corresponds to multiplication by the degree d={d}.")
    print("  Over the rationals Q, multiplication by a non-zero integer is an isomorphism.")
    print("  So, H_4(X; Q) -> H_4(CP^3; Q) is an isomorphism.")
    
    print("\n  Sub-step 5c: Use the homology LES to find dim(H_4(CP^3, X; Q)).")
    print(f"  The sequence is ... -> Q --(iso)--> Q -> H_4(CP^3, X; Q) -> {dim_H3_X} -> ...")
    print("  By exactness, since the first map is an isomorphism (surjective), the map Q -> H_4(CP^3, X; Q) must be the zero map.")
    print("  Also by exactness, the map H_4(CP^3, X; Q) -> H_3(X; Q) must be injective.")
    print("  This gives the short exact sequence: 0 -> H_4(CP^3, X; Q) -> H_3(X; Q) = 0.")
    dim_H4_pair = 0
    print(f"  This implies that H_4(CP^3, X; Q) must be the zero vector space. Its dimension is {dim_H4_pair}.")
    
    rank_pi4_pair = dim_H4_pair
    print(f"  From Step 4, we have rank(pi_4(CP^3, X)) = {rank_pi4_pair}.\n")

    print("Step 6: Final Calculation")
    print("From Step 3, rank(pi_3(X)) <= rank(pi_4(CP^3, X)).")
    rank_pi3_X = 0
    print(f"Since rank(pi_4(CP^3, X)) = {rank_pi4_pair}, we must have rank(pi_3(X)) <= {rank_pi4_pair}.")
    print("As the rank of a group cannot be negative, it must be zero.")
    print(f"rank(pi_3(X)) = {rank_pi3_X}")

solve_homotopy_rank()