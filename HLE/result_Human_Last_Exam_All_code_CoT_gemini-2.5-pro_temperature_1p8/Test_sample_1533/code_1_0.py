def derive_ratio():
    """
    This function prints the step-by-step derivation of the ratio BM/MI in terms of the side lengths a, b, and c.
    """
    print("Let the triangle be ABC, with side lengths a, b, c opposite to vertices A, B, C respectively.")
    print("Let I be the incenter, and M be the intersection of the angle bisector of angle B with the circumcircle.")
    print("We want to find the ratio BM / MI.")
    print("-" * 50)

    print("Step 1: Write the target ratio in a more convenient form.")
    print("BM = BI + IM. The points B, I, M are collinear in that order.")
    print("So, BM / MI = (BI + IM) / IM = (BI / IM) + 1.")
    print("-" * 50)

    print("Step 2: Prove the key lemma that MI = MA = MC.")
    print("M is on the circumcircle and on the angle bisector of angle B. So, angle ABM = angle CBM = B/2.")
    print("Since A, B, C, M are on the circumcircle, angles subtended by the same arc are equal.")
    print(" - Angle CAM subtends arc CM, so angle CAM = angle CBM = B/2.")
    print(" - Angle ACM subtends arc AM, so angle ACM = angle ABM = B/2.")
    print("In triangle AMC, since angle CAM = angle ACM, the triangle is isosceles with MA = MC.")
    
    print("\nNow consider triangle AIM.")
    print(" - Angle MAI = Angle MAC + Angle CAI = B/2 + A/2.")
    print(" - To find angle AIM, consider triangle ABI. The sum of its internal angles is 180 degrees.")
    print("   Angle AIB = 180 - (Angle IAB + Angle IBA) = 180 - (A/2 + B/2).")
    print(" - Since B, I, M are collinear, angle AIM is supplementary to angle AIB.")
    print("   Angle AIM = 180 - Angle AIB = 180 - (180 - (A/2 + B/2)) = A/2 + B/2.")
    print("In triangle AIM, since angle MAI = angle AIM, the triangle is isosceles with MA = MI.")
    print("Therefore, we have established that MI = MA.")
    print("-" * 50)

    print("Step 3: Express lengths BI and MI using standard triangle properties.")
    print("For MI:")
    print("   MI = MA. In triangle ABM, by the Law of Sines: MA / sin(angle ABM) = AB / sin(angle AMB).")
    print("   Angle ABM = B/2. Angle AMB = Angle ACB = C (subtend same arc AB).")
    print("   MA / sin(B/2) = c / sin(C).")
    print("   From the extended Law of Sines in triangle ABC, c/sin(C) = 2R (R is the circumradius).")
    print("   So, MA = 2R * sin(B/2). This means MI = 2R * sin(B/2).")
    print("\nFor BI:")
    print("   Consider the right triangle formed by B, I, and D (the incircle tangent point on BC).")
    print("   In this triangle, angle IBD = B/2 and the side opposite to it is ID = r (the inradius).")
    print("   sin(B/2) = ID / BI = r / BI.")
    print("   So, BI = r / sin(B/2).")
    print("-" * 50)
    
    print("Step 4: Compute the ratio BI / IM.")
    print("BI / IM = (r / sin(B/2)) / (2R * sin(B/2))")
    print("        = r / (2 * R * sin(B/2)^2)")
    print("\nTo express this in terms of side lengths, we use:")
    print("s = (a+b+c)/2 (semi-perimeter)")
    print("Area K = sqrt(s(s-a)(s-b)(s-c))")
    print("r = K/s")
    print("R = abc/(4K)")
    print("sin(B/2)^2 = (s-a)(s-c) / (ac)")
    print("\nSubstituting these in:")
    print("BI / IM = (K/s) / [ 2 * (abc/4K) * (s-a)(s-c)/(ac) ]")
    print("        = (K/s) / [ (abc/2K) * (s-a)(s-c)/(ac) ]")
    print("        = (K/s) / [ b(s-a)(s-c) / (2K) ]")
    print("        = (2 * K^2) / (s * b * (s-a) * (s-c))")
    print("\nUsing K^2 = s(s-a)(s-b)(s-c):")
    print("BI / IM = [ 2 * s(s-a)(s-b)(s-c) ] / [ s * b * (s-a) * (s-c) ]")
    print("        = 2(s-b) / b")
    print("\nSubstituting s = (a+b+c)/2:")
    print("BI / IM = [ 2 * ((a+b+c)/2 - b) ] / b = (a+b+c-2b) / b = (a+c-b) / b.")
    print("-" * 50)
    
    print("Step 5: Calculate the final ratio BM / MI.")
    print("BM / MI = (BI / IM) + 1")
    print("        = (a+c-b)/b + 1")
    print("        = (a+c-b+b)/b")
    print("        = (a+c)/b")
    print("-" * 50)

    print("The final equation is:")
    print("BM / MI = (a + c) / b")
    print("\nTerms in the final equation:")
    print(f"The first term in the numerator is a (side length opposite to vertex A).")
    print(f"The second term in the numerator is c (side length opposite to vertex C).")
    print(f"The term in the denominator is b (side length opposite to vertex B).")

if __name__ == '__main__':
    derive_ratio()