Yes, the theory can fail. The birefringent medium couples the spatial and polarization degrees of freedom of the light. This transforms the system from a scalar one (where only the spatial profile of a single polarization needs control) to a vector one. To achieve an arbitrary output in this new system, one would need to generate a specific input with a spatially varying polarization state (a full vector field). A typical experimental setup designed for the initial problem can only shape the wavefront of a single, fixed polarization. This setup lacks the necessary degrees of freedom to create the required vector input field, and thus it can no longer be guaranteed to produce a desired output.