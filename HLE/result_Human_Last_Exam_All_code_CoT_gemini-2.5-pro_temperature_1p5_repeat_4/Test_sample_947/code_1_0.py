import math

def solve_superconductor_field():
    """
    This function prints the derivation and the final expression for the magnetic field
    outside a stack of superconducting strips.
    """

    # Define the symbols used in the equation as strings for printing.
    H_a = "Ha"
    H_0 = "H0"
    pi = "pi"
    w = "w"
    D = "D"
    x = "x"
    Jc = "Jc"
    d = "d"

    print("The total magnetic field H(x) is the sum of the applied field and the field from the strips.")
    print(f"H(x) = {H_a} + H_strips(x)\n")

    print("For the region |x| >> w, we model each strip as a magnetic dipole.")
    print("The magnetic moment per unit length of one strip is:")
    print(f"m_z = -{Jc} * {d} * {w}^2\n")

    print("The field from the infinite stack of these dipoles can be summed up.")
    print("This yields the expression for the field generated by the strips:")
    print(f"H_strips(x) = ( ( {pi} * {Jc} * {d} * {w}^2 ) / ( 2 * {D}^2 ) ) * sech^2( ( {pi} * {x} ) / {D} )\n")

    print(f"Using the given relation H0 = Jc * d / pi, which means Jc * d = {pi} * {H_0}, we can rewrite H_strips(x) as:")
    print(f"H_strips(x) = ( ( {pi}^2 * {H_0} * {w}^2 ) / ( 2 * {D}^2 ) ) * sech^2( ( {pi} * {x} ) / {D} )\n")
    
    print("Therefore, the final expression for the total magnetic field H(x) for |x| >> w is:")
    final_equation_term1 = f"{H_a}"
    final_equation_term2_numerator = f"({pi})^2 * {H_0} * ({w})^2"
    final_equation_term2_denominator = f"2 * ({D})^2"
    final_equation_term2_function = f"sech^2({pi} * {x} / {D})"
    
    print("\n--- Final Equation ---")
    print(f"H(x) = {final_equation_term1} + ( {final_equation_term2_numerator} / ({final_equation_term2_denominator}) ) * {final_equation_term2_function}")
    print("----------------------\n")
    
    print("Where:")
    print("H(x) is the total magnetic field in the z-direction at position x.")
    print(f"{H_a} is the applied magnetic field.")
    print(f"{H_0} is the characteristic field, H0 = Jc*d/pi.")
    print(f"{w} is half the width of each strip.")
    print(f"{D} is the separation distance between strips.")
    print(f"{x} is the position in the x-direction (|x| >> w).")
    print("sech(u) is the hyperbolic secant function, which is equal to 1/cosh(u).")


solve_superconductor_field()
