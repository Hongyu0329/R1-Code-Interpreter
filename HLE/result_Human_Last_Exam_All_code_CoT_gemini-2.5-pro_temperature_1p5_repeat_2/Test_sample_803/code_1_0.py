import math

def is_prime(n):
    """Checks if a number is prime."""
    if n <= 1:
        return False
    if n <= 3:
        return True
    if n % 2 == 0 or n % 3 == 0:
        return False
    i = 5
    while i * i <= n:
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6
    return True

def get_group_presentation(q, m):
    """
    Returns the presentation for the dihedral group of order 2*q^m.
    This demonstrates the final equation with its specific numbers.
    """
    if not isinstance(q, int) or not isinstance(m, int) or m < 1 or q < 3 or q % 2 == 0 or not is_prime(q):
        return "Invalid input: q must be an odd prime and m must be a natural number."
        
    order = 2 * (q**m)
    q_power = q**m
    
    # The final equation is the group presentation
    # Outputting each number in the final equation (presentation)
    presentation = f"<r, s | r^{q_power} = e, s^2 = e, srs^-1 = r^-1>"
    
    return f"The group is the Dihedral group D_{order} with presentation {presentation}."

def find_nonabelian_filled_groups():
    """
    Explains and identifies the nonabelian filled groups of order 2*q^m.
    """
    print("--- Analysis of Nonabelian Filled Groups of Order 2*q^m ---")
    print("\nThis program identifies the nonabelian 'filled' groups of order 2*q^m, for an odd prime q and a natural number m.")

    print("\nStep 1: Using the Characterization of Filled Groups")
    print("A finite group G is filled if and only if it has no subgroup isomorphic to C_p x C_p (for any prime p) or the quaternion group Q_8.")

    print("\nStep 2: Applying to Groups of Order 2*q^m")
    print("For a group G of order 2*q^m:")
    print("- G cannot have a Q_8 subgroup, as 8 does not divide 2*q^m.")
    print("- G cannot have a C_2 x C_2 subgroup, as 4 does not divide 2*q^m.")
    print("- The only remaining condition is that G must not have a subgroup isomorphic to C_q x C_q.")

    print("\nStep 3: Determining Sylow Subgroup Structure")
    print("The condition of having no C_q x C_q subgroup implies that the Sylow q-subgroup (of order q^m) must be cyclic.")

    print("\nStep 4: Classifying the Group")
    print("A nonabelian group of order 2*q^m with a cyclic Sylow q-subgroup is uniquely determined as a semidirect product.")
    print("The structure must be C_{q^m} \u22ca C_2, where the action is by inversion.")

    print("\n--- Final Answer ---")
    print("The nonabelian filled groups of order 2*q^m for an odd prime q and natural number m are the Dihedral groups D_{2q^m}.")
    print("These groups are generated by an element 'r' of order q^m and an element 's' of order 2, satisfying the relation srs^-1 = r^-1.")

    print("\nExample for q=3, m=2:")
    print(get_group_presentation(3, 2))

if __name__ == '__main__':
    find_nonabelian_filled_groups()