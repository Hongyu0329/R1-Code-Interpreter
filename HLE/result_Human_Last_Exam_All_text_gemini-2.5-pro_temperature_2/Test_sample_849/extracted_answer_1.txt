Proof-based learning from formal systems