The final set of rules is: {f(y,y) -> g(g(y)), h(x) -> g(x), f(g(x),g(y)) -> g(x), g(g(g(x))) -> g(x)}