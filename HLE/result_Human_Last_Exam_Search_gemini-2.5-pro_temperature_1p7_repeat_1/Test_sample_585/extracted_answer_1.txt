In a Kalman filter that uses a minimal three-element attitude deviation `δ` and a reference attitude `R_ref`, the post-reset covariance `Σ'` is calculated from the pre-reset covariance `Σ` after the reset operation `R_ref' = exp([δ̂]) * R_ref` and `δ̂` is reset to zero.

The exact expression for the post-reset covariance is given by the transformation:

**Σ' = G * Σ * G<sup>T</sup>**

where `G` is a block matrix that captures the linearization of the reset mapping. If the state vector is composed of the attitude error `δ` and a vector of other states `x_o`, then `G` takes the form:

`G =` <br> `| F  0 |` <br> `| 0  I |`

Here, `I` is an identity matrix corresponding to the other states which are unaffected by the attitude reset logic. The crucial component is the 3x3 matrix `F`, which is the Jacobian of the post-reset attitude error with respect to the pre-reset attitude error. Assuming the attitude deviation `δ` is a rotation vector (Euler axis-angle vector), the exact expression for `F` is:

**F = I - (1/2)[δ̂×] + ( (1 - (||δ̂|| / 2)cot(||δ̂|| / 2)) / ||δ̂||² ) [δ̂×]²**

In this expression:
*   **`I`** is the 3x3 identity matrix.
*   **`δ̂`** is the 3x1 vector representing the estimated attitude deviation that is being moved to the reference attitude.
*   **`||δ̂||`** is the Euclidean norm of the vector `δ̂`.
*   **`[δ̂×]`** is the skew-symmetric matrix form of the vector `δ̂`.
*   **`cot`** is the cotangent function.

This formula provides the exact transformation for the covariance matrix within the standard framework of an Extended Kalman Filter.