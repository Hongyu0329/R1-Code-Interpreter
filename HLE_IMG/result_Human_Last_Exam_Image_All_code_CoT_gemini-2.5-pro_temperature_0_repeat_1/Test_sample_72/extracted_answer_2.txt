Intramolecular [2+2] cycloaddition and intermolecular [2+2] cycloaddition